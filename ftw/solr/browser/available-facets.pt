<div tal:omit-tag=""
     tal:define="facets view/facets; selected view/selected"
     tal:condition="python: facets"
     i18n:domain="solr">

  <tal:facets repeat="facet facets">
    <tal:facet tal:define="facet_counts facet/counts">
      <div tal:attributes="class python: not facet_counts and 'selected filter' or 'filter'">
        <a href="#"
           class="link-plain"
           tal:content="facet/title"
           i18n:translate=""
           tal:attributes="tabindex python: '-1' if not facet_counts else nothing;
                           aria-controls string:filter_${repeat/facet/index};
                           aria-owns string:filter_${repeat/facet/index}"
           aria-haspopup="true"></a>
        <ul class="facets"
            tal:condition="facet_counts"
            aria-hidden="true"
            tal:attributes="id string:filter_${repeat/facet/index}">
            <li tal:repeat="item facet_counts">
                <a href="#" class="facet" tal:content="string:${item/title} (${item/count})"
                   tal:attributes="href python:request.ACTUAL_URL + '?' + item['query']" />
            </li>
        </ul>
      </div>
    </tal:facet>
  </tal:facets>

</div>
